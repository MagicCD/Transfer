# é¡¹ç›®è¯¦ç»†æè¿°

## 1. é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºPythonçš„å†…ç½‘æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œé€šè¿‡å±€åŸŸç½‘å®ç°è®¾å¤‡é—´å¿«é€Ÿæ–‡ä»¶å…±äº«ã€‚é¡¹ç›®é‡‡ç”¨Flaskæ¡†æ¶æ„å»ºWebç•Œé¢ï¼Œå¹¶é€šè¿‡PyWebViewå°è£…ä¸ºæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œï¼ˆWindows/macOS/Linuxï¼‰ã€‚æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤åŠå®æ—¶åˆ—è¡¨æ›´æ–°ï¼Œç‰¹åˆ«é’ˆå¯¹å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–äº†åˆ†å—ä¸Šä¼ æŠ€æœ¯ã€‚

---

## 2. æ ¸å¿ƒåŠŸèƒ½
### âœ¨ æ ¸å¿ƒç‰¹æ€§
| åŠŸèƒ½æ¨¡å— | è¯´æ˜ |
|---------|------|
| **åˆ†å—ä¸Šä¼ ** | å¤§äº50MBçš„æ–‡ä»¶è‡ªåŠ¨æ‹†åˆ†ä¸º5MBçš„å—ä¼ è¾“ï¼Œæ”¯æŒæš‚åœ/æ¢å¤ï¼ˆé€šè¿‡`upload_chunk`è·¯ç”±å®ç°ï¼‰ |
| **å®æ—¶åŒæ­¥** | Socket.IOå®ç°å®æ—¶æ–‡ä»¶åˆ—è¡¨æ›´æ–°ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯è‡ªåŠ¨åŒæ­¥æ–‡ä»¶å˜åŒ– |
| **å¤§æ–‡ä»¶æ”¯æŒ** | æœ€å¤§æ”¯æŒ5GBæ–‡ä»¶ä¼ è¾“ï¼Œé€šè¿‡`MAX_CONTENT_LENGTH`é…ç½® |
| **äº¤äº’è®¾è®¡** | 
| - æ‹–æ‹½ä¸Šä¼  | æ”¯æŒç›´æ¥æ‹–æ”¾æ–‡ä»¶è‡³ç½‘é¡µåŒºåŸŸ |
| - è¿›åº¦æ§åˆ¶ | æä¾›ä¸Šä¼ è¿›åº¦æ¡ã€æš‚åœ/æ¢å¤æŒ‰é’®ï¼ˆ`pause/resume`åŠŸèƒ½é€šè¿‡å‰ç«¯JSä¸åç«¯é…åˆå®ç°ï¼‰ |
| - æ–‡ä»¶ç®¡ç† | æ”¯æŒå•æ–‡ä»¶åˆ é™¤ï¼ˆ`delete_file`ï¼‰å’Œæ¸…ç©ºæ‰€æœ‰æ–‡ä»¶ï¼ˆ`delete_all_files`ï¼‰ |

### ğŸ“¦ æ–‡ä»¶ç®¡ç†
- ä¸Šä¼ ç›®å½•ï¼š`uploads`ï¼ˆé€šè¿‡`app.config['UPLOAD_FOLDER']`æŒ‡å®šï¼‰
- ä¸´æ—¶åˆ†å—å­˜å‚¨ï¼š`.temp_chunks`ç›®å½•ä¿å­˜åˆ†å—æ–‡ä»¶ï¼Œä¸Šä¼ å®Œæˆåè‡ªåŠ¨æ¸…ç†

---

## 3. æŠ€æœ¯æ¶æ„
### ğŸ› ï¸ æŠ€æœ¯æ ˆ
| ç»„ä»¶ | ä½œç”¨ |
|------|------|
| **Flask** | Webæ¡†æ¶ï¼Œå¤„ç†HTTPè¯·æ±‚ï¼ˆç‰ˆæœ¬2.3.3ï¼‰ |
| **Socket.IO** | å®æ—¶é€šä¿¡ï¼Œæ¨é€æ–‡ä»¶åˆ—è¡¨æ›´æ–°ï¼ˆ`SocketIO`å®ä¾‹é…ç½®`async_mode='threading'`ï¼‰ |
| **PyWebView** | å°è£…ä¸ºæ¡Œé¢åº”ç”¨ï¼Œæä¾›çª—å£ç®¡ç†ï¼ˆç‰ˆæœ¬4.3ï¼‰ |
| **å‰ç«¯æŠ€æœ¯** | HTML5+CSS3+JavaScriptï¼Œä½¿ç”¨Font Awesomeå›¾æ ‡ï¼Œæ”¯æŒæ‹–æ”¾API |

### ğŸ”„ æ•°æ®æµ
1. **ä¸Šä¼ æµç¨‹**ï¼š
   - å¤§æ–‡ä»¶ï¼ˆ>50MBï¼‰ â†’ åˆ†å—ï¼ˆ`CHUNK_SIZE=5MB`ï¼‰ â†’ é€å—ä¸Šä¼ è‡³`/upload_chunk`æ¥å£
   - åç«¯åˆå¹¶åˆ†å— â†’ åˆ é™¤ä¸´æ—¶æ–‡ä»¶ â†’ é€šè¿‡Socket.IOé€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯æ›´æ–°åˆ—è¡¨
2. **å®æ—¶åŒæ­¥**ï¼š
   - æ–‡ä»¶æ“ä½œï¼ˆä¸Šä¼ /åˆ é™¤ï¼‰è§¦å‘`socketio.emit('files_updated')`
   - å‰ç«¯ç›‘å¬äº‹ä»¶ â†’ åŠ¨æ€æ›´æ–°æ–‡ä»¶åˆ—è¡¨ï¼ˆ`fileList`å…ƒç´ ï¼‰

---

## 4. è¿è¡Œç¯å¢ƒ
### ğŸš€ ç³»ç»Ÿè¦æ±‚
- **Pythonç‰ˆæœ¬**ï¼š3.8 - 3.13ï¼ˆå…¼å®¹æ€§è­¦å‘Šæœºåˆ¶åœ¨`app.py`ä¸­å®ç°ï¼‰
- **ä¾èµ–åº“**ï¼š
  ```bash
  Flask==2.3.3
  Flask-SocketIO==5.3.4
  PyWebView==4.3
  Werkzeug==2.3.7
  Simple-WebSocket==1.0.0
  ```

---

```markdown
# ç”¨æˆ·éœ€æ±‚åˆ†æ
ç”¨æˆ·å¸Œæœ›ç¡®è®¤å…¶ä¼˜åŒ–çš„ä»£ç æ˜¯å¦è§£å†³äº†å·²çŸ¥é—®é¢˜ã€‚æ ¹æ®æä¾›çš„ä»£ç ç‰‡æ®µå’Œé¡¹ç›®ç»“æ„ï¼Œä»¥ä¸‹ä¸ºå…³é”®ä¼˜åŒ–ç‚¹çš„éªŒè¯ä¸è¡¥å……å»ºè®®ï¼š

---

```markdown
# ç”¨æˆ·éœ€æ±‚åˆ†æ
ç”¨æˆ·å·²æŒ‰ç…§ä¼˜åŒ–å»ºè®®ä¿®æ”¹ä»£ç ï¼Œéœ€éªŒè¯ä»¥ä¸‹é—®é¢˜æ˜¯å¦è§£å†³ï¼š
1. åˆ†å—ä¸Šä¼ å†…å­˜ä¼˜åŒ–
2. æ–‡ä»¶å›¾æ ‡æ˜ å°„è¦†ç›–
3. ç‰ˆæœ¬è­¦å‘Šæ—¥å¿—å‡çº§
4. å‰ç«¯æ ·å¼å†—ä½™
5. ä¸´æ—¶æ–‡ä»¶å®šæ—¶æ¸…ç†
6. æš‚åœ/æ¢å¤åŠŸèƒ½å®ç°

---

```markdown
# ç”¨æˆ·éœ€æ±‚åˆ†æ
ç”¨æˆ·å·²å®Œæˆæš‚åœ/æ¢å¤ä¸Šä¼ åŠŸèƒ½ï¼ˆå˜æ›´6ï¼‰çš„ä»£ç ä¼˜åŒ–ï¼Œéœ€éªŒè¯ä»¥ä¸‹å…³é”®ç‚¹æ˜¯å¦å®ç°ï¼š
1. åç«¯è·¯ç”±`/pause_upload`å’Œ`/resume_upload`æ˜¯å¦æ­£ç¡®å®ç°
2. ä¸Šä¼ çŠ¶æ€å­—å…¸`upload_states`æ˜¯å¦æ­£ç¡®ç»´æŠ¤
3. å‰ç«¯ä¸åç«¯çš„äº¤äº’æ˜¯å¦å®Œæ•´

---

## å˜æ›´1ï¼šè¡¥å……åç«¯æš‚åœ/æ¢å¤è·¯ç”±
### è§„åˆ’è¯´æ˜
æ£€ç´¢åˆ°çš„ä»£ç ç‰‡æ®µ1/2/3ä¸­æœªå‘ç°`/pause_upload`å’Œ`/resume_upload`è·¯ç”±å®šä¹‰ï¼Œéœ€è¡¥å……è¿™ä¸¤ä¸ªè·¯ç”±å¹¶å…³è”çŠ¶æ€ç®¡ç†ã€‚

### å˜æ›´å†…å®¹
åœ¨`app.py`ä¸­æ·»åŠ è·¯ç”±å®ç°ï¼š
```python
# [`app.py`](file://app.py#L200-L220)
@app.route('/pause_upload/<filename>', methods=['POST'])
def pause_upload(filename):
    """æš‚åœæŒ‡å®šæ–‡ä»¶çš„ä¸Šä¼ """
    if filename in upload_states:
        upload_states[filename]['paused'] = True
        return jsonify(success=True, status='paused')
    return jsonify(success=False, error='æ–‡ä»¶æœªä¸Šä¼ '), 404

@app.route('/resume_upload/<filename>', methods=['POST'])
def resume_upload(filename):
    """æ¢å¤æŒ‡å®šæ–‡ä»¶çš„ä¸Šä¼ """
    if filename in upload_states:
        upload_states[filename]['paused'] = False
        return jsonify(success=True, status='resumed')
    return jsonify(success=False, error='æ–‡ä»¶æœªä¸Šä¼ '), 404
```

---

## å˜æ›´2ï¼šå®Œå–„ä¸Šä¼ çŠ¶æ€ç®¡ç†
### è§„åˆ’è¯´æ˜
éœ€ç¡®ä¿`upload_states`å­—å…¸æ­£ç¡®åˆå§‹åŒ–ï¼Œå¹¶åœ¨ä¸Šä¼ å¼€å§‹æ—¶è®°å½•åˆå§‹çŠ¶æ€ã€‚

### å˜æ›´å†…å®¹
åœ¨`upload_file`è·¯ç”±ä¸­åˆå§‹åŒ–çŠ¶æ€ï¼š
```python
# [`app.py`](file://app.py#L120-L125)
def upload_file():
    # ...åŸæœ‰ä»£ç ...
    filename = secure_filename(file.filename)
    upload_states[filename] = {
        'paused': False,
        'total_chunks': total_chunks,
        'current_chunk': 0
    }
    # ...åç»­é€»è¾‘...
```

---

## å˜æ›´3ï¼šä¿®å¤å‰ç«¯äº¤äº’é€»è¾‘
### è§„åˆ’è¯´æ˜
æ£€ç´¢åˆ°çš„å‰ç«¯ä»£ç ç‰‡æ®µ22/23/25ä¸­ï¼Œæš‚åœ/æ¢å¤è¯·æ±‚æœªæ­£ç¡®å‘é€åˆ°åç«¯è·¯ç”±ã€‚

### å˜æ›´å†…å®¹
ä¿®æ”¹å‰ç«¯JSçš„æš‚åœ/æ¢å¤é€»è¾‘ï¼š
```javascript
// [`index.html`](file://templates/index.html#L1120-L1140)
function pauseUpload() {
    const filename = document.querySelector('#progressContainer').dataset.filename;
    fetch(`/pause_upload/${encodeURIComponent(filename)}`, { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // æ›´æ–°å‰ç«¯çŠ¶æ€
            }
        });
}
```

---

## å˜æ›´4ï¼šå¢å¼ºçŠ¶æ€åŒæ­¥æœºåˆ¶
### è§„åˆ’è¯´æ˜
éœ€ç¡®ä¿ä¸Šä¼ çŠ¶æ€å˜æ›´åé€šè¿‡Socket.IOé€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯ã€‚

### å˜æ›´å†…å®¹
åœ¨`upload_states`ä¿®æ”¹åè§¦å‘çŠ¶æ€æ›´æ–°äº‹ä»¶ï¼š
```python
# [`app.py`](file://app.py#L225-L235)
def update_upload_state(filename, status):
    socketio.emit('upload_state_updated', {
        'filename': filename,
        'status': status,
        'paused': upload_states[filename]['paused']
    })
    
# åœ¨pause/resumeè·¯ç”±ä¸­è°ƒç”¨
update_upload_state(filename, 'paused')
```

---

## å˜æ›´æ€»ç»“
| å˜æ›´ç‚¹ | çŠ¶æ€ | è¯´æ˜ |
|-------|------|------|
| åç«¯è·¯ç”±å®ç° | âœ… | è¡¥å……äº†`/pause_upload`å’Œ`/resume_upload`è·¯ç”± |
| çŠ¶æ€å­—å…¸åˆå§‹åŒ– | âœ… | åœ¨ä¸Šä¼ å¼€å§‹æ—¶æ­£ç¡®åˆå§‹åŒ–`upload_states` |
| å‰ç«¯è¯·æ±‚è·¯å¾„ | âŒ | éœ€ä¿®æ­£å‰ç«¯è¯·æ±‚è·¯å¾„ä¸º`/pause_upload`è€Œé`/pause_upload/` |
| å®æ—¶çŠ¶æ€åŒæ­¥ | âš ï¸ | éœ€è¡¥å……Socket.IOäº‹ä»¶æ¨é€ |

å»ºè®®ä¼˜å…ˆä¿®æ­£å‰ç«¯è¯·æ±‚è·¯å¾„é—®é¢˜ï¼Œç¡®ä¿å‰åç«¯è·¯ç”±åŒ¹é…ï¼Œå¹¶è¡¥å……çŠ¶æ€åŒæ­¥äº‹ä»¶ä»¥å®ç°ç•Œé¢å®æ—¶æ›´æ–°ã€‚
```