# 常见问题

本文档收集了使用内网文件传输工具时的常见问题和解决方案。

## 安装问题

### Q: 安装依赖时出现错误

**问题**: 运行 `pip install -r requirements.txt` 时出现错误。

**解决方案**:
1. 确保您使用的是Python 3.8或更高版本：`python --version`
2. 尝试更新pip：`pip install --upgrade pip`
3. 使用国内镜像源：`pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`
4. 如果特定依赖项安装失败，尝试单独安装并查看详细错误信息

### Q: 在Windows上安装PyWebView失败

**问题**: 在Windows上安装PyWebView时出现 `Microsoft Visual C++ 14.0 or greater is required` 错误。

**解决方案**:
1. 下载并安装 [Microsoft Visual C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/)
2. 安装时选择"C++构建工具"工作负载
3. 重新尝试安装PyWebView

## 启动问题

### Q: 服务器启动失败

**问题**: 运行 `python app.py` 时，应用无法启动。

**解决方案**:
1. 检查端口5000是否被占用：
   - Windows: `netstat -ano | findstr 5000`
   - macOS/Linux: `lsof -i :5000`
2. 如果端口被占用，可以在 `.env` 文件中设置 `SERVER_PORT=其他端口号`
3. 检查日志输出，查找具体错误信息
4. 确保您有足够的权限运行应用

### Q: 应用启动后无法访问

**问题**: 应用启动成功，但无法通过浏览器访问。

**解决方案**:
1. 确保您访问的URL正确，包括端口号
2. 检查防火墙设置，确保应用端口已开放
3. 如果使用的是局域网IP，确保您的设备连接到同一网络
4. 尝试使用 `localhost` 或 `127.0.0.1` 访问，验证服务器是否正常运行

## 上传问题

### Q: 无法上传大文件

**问题**: 尝试上传大文件时失败。

**解决方案**:
1. 确认文件大小是否超过配置的最大限制（默认5GB）
2. 对于大于50MB的文件，应自动使用分块上传功能
3. 检查上传目录是否有足够的磁盘空间和写入权限
4. 如果使用分块上传，确保网络连接稳定
5. 尝试增加 `CHUNK_SIZE` 配置项的值，减少分块数量

### Q: 上传过程中断

**问题**: 文件上传过程中断，无法完成。

**解决方案**:
1. 对于大文件，使用分块上传功能，支持断点续传
2. 检查网络连接是否稳定
3. 确保浏览器没有自动刷新或关闭页面
4. 如果上传被暂停，可以使用"恢复上传"功能继续
5. 检查服务器日志，查找可能的错误原因

### Q: 上传完成后文件损坏

**问题**: 文件上传成功，但下载后发现文件损坏或不完整。

**解决方案**:
1. 检查上传过程是否有错误消息
2. 对于大文件，确保所有分块都已成功上传
3. 验证源文件是否完好
4. 检查磁盘空间是否充足
5. 尝试使用较小的分块大小重新上传

## 下载问题

### Q: 无法下载文件

**问题**: 点击下载按钮后没有反应或出现错误。

**解决方案**:
1. 确保文件仍然存在于服务器上
2. 检查浏览器的下载设置
3. 尝试使用不同的浏览器
4. 检查浏览器控制台是否有错误信息
5. 验证文件权限是否正确

### Q: 下载速度很慢

**问题**: 文件下载速度非常慢。

**解决方案**:
1. 检查网络连接速度
2. 确保没有其他应用占用大量带宽
3. 对于大文件，考虑使用其他文件传输工具
4. 如果在公共网络上，可能受到带宽限制

## 其他问题

### Q: 文件列表不更新

**问题**: 上传或删除文件后，文件列表没有更新。

**解决方案**:
1. 手动刷新页面
2. 检查WebSocket连接是否正常
3. 在URL参数中添加 `force_refresh=true` 强制刷新缓存
4. 重启应用

### Q: 应用占用内存过高

**问题**: 应用运行一段时间后内存占用很高。

**解决方案**:
1. 检查是否有大量并发上传/下载操作
2. 定期清理临时文件目录
3. 调整 `TEMP_FILES_MAX_AGE` 配置项，减少临时文件保留时间
4. 重启应用释放内存

### Q: 如何备份已上传的文件

**问题**: 想要备份所有已上传的文件。

**解决方案**:
1. 直接复制 `UPLOAD_FOLDER` 配置项指定的目录（默认为 `uploads/`）
2. 使用定时任务自动备份该目录
3. 考虑使用云存储服务进行备份

## 联系支持

如果您遇到的问题未在此文档中列出，请通过以下方式获取支持：

1. 在 [GitHub Issues](https://github.com/MagicCD/Transfer/issues) 提交问题
2. 查看 [项目Wiki](https://github.com/MagicCD/Transfer/wiki) 获取更多信息
3. 联系开发者：[CSDN博客](https://blog.csdn.net/qq_52357217)
